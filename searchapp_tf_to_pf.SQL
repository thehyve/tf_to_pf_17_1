--------------------------------------------------------------------------
-- Play this script in SEARCHAPP@EC2-54-93-196-236.EU-CENTRAL-1.COMPUTE.AMAZONAWS.COM:1522/ORCL to make it look like SEARCHAPP@EC2-54-93-196-236.EU-CENTRAL-1.COMPUTE.AMAZONAWS.COM:1523/ORCL
--
-- Please review the script before using it to make sure it won't
-- cause any unacceptable data loss.
--
-- SEARCHAPP@EC2-54-93-196-236.EU-CENTRAL-1.COMPUTE.AMAZONAWS.COM:1522/ORCL Schema Extracted by User SYSTEM 
-- SEARCHAPP@EC2-54-93-196-236.EU-CENTRAL-1.COMPUTE.AMAZONAWS.COM:1523/ORCL Schema Extracted by User SYSTEM 

CREATE SEQUENCE SEARCHAPP.SEQ_REQ_UPLOAD_FIELD_ID
  START WITH 41
  MAXVALUE 9999999999999999999999999999
  MINVALUE 1
  NOCYCLE
  NOCACHE
  NOORDER;
  
CREATE OR REPLACE TRIGGER "SEARCHAPP"."TRG_SRCH_REQ_UPLOAD_FIELD_ID" before
  INSERT ON "SEARCHAPP"."SEARCH_REQUIRED_UPLOAD_FIELD" FOR EACH row  BEGIN IF inserting THEN IF :NEW."REQUIRED_UPLOAD_FIELD_ID" IS NULL THEN
  SELECT SEQ_REQ_UPLOAD_FIELD_ID.nextval INTO :NEW."REQUIRED_UPLOAD_FIELD_ID" FROM dual;
END IF;
END IF;
END;
/
ALTER TRIGGER "SEARCHAPP"."TRG_SRCH_REQ_UPLOAD_FIELD_ID" ENABLE;

CREATE SEQUENCE SEARCHAPP.SEQ_SEARCH_FORM_LAYOUT_ID
  START WITH 41
  MAXVALUE 999999999999999999999999999
  MINVALUE 1
  NOCYCLE
  CACHE 20
  NOORDER;

CREATE OR REPLACE TRIGGER "SEARCHAPP"."TRG_SEARCH_FORM_LAYOUT_ID" before
  INSERT ON "SEARCHAPP"."SEARCH_FORM_LAYOUT" FOR EACH row BEGIN IF inserting THEN IF :NEW."FORM_LAYOUT_ID" IS NULL THEN
  SELECT SEQ_SEARCH_FORM_LAYOUT_ID.nextval INTO :NEW."FORM_LAYOUT_ID" FROM dual;
END IF;
END IF;
END;
/
ALTER TRIGGER "SEARCHAPP"."TRG_SEARCH_FORM_LAYOUT_ID" ENABLE;

-- legacy?
-- not nvarchar
CREATE TABLE SEARCHAPP.SEARCH_FORM_LAYOUT
(
  FORM_LAYOUT_ID  NUMBER(22)                    NOT NULL,
  FORM_KEY        NVARCHAR2(50),
  FORM_COLUMN     NVARCHAR2(50),
  DISPLAY_NAME    NVARCHAR2(50),
  DATA_TYPE       NVARCHAR2(50),
  SEQUENCE        NUMBER(22),
  DISPLAY         CHAR(1 BYTE)
);

CREATE UNIQUE INDEX SEARCHAPP.SEARCH_FORM_LAYOUT_PK ON SEARCHAPP.SEARCH_FORM_LAYOUT
(FORM_LAYOUT_ID);

ALTER TABLE SEARCHAPP.SEARCH_FORM_LAYOUT
 ADD CONSTRAINT SEARCH_FORM_LAYOUT_PK
  PRIMARY KEY
  (FORM_LAYOUT_ID)
  USING INDEX SEARCHAPP.SEARCH_FORM_LAYOUT_PK;


-- legacy?
-- not nvarchar
CREATE TABLE SEARCHAPP.SEARCH_REQUIRED_UPLOAD_FIELD
(
  REQUIRED_UPLOAD_FIELD_ID  NUMBER(22)          NOT NULL,
  TYPE                      NVARCHAR2(50),
  FIELD                     NVARCHAR2(50)
);

CREATE UNIQUE INDEX SEARCHAPP.SEARCH_REQ_UPLOAD_FIELD_PK ON SEARCHAPP.SEARCH_REQUIRED_UPLOAD_FIELD
(REQUIRED_UPLOAD_FIELD_ID);

ALTER TABLE SEARCHAPP.SEARCH_REQUIRED_UPLOAD_FIELD
 ADD CONSTRAINT SEARCH_REQ_UPLOAD_FIELD_PK
  PRIMARY KEY
  (REQUIRED_UPLOAD_FIELD_ID)
  USING INDEX SEARCHAPP.SEARCH_REQ_UPLOAD_FIELD_PK;

ALTER TABLE SEARCHAPP.SEARCH_AUTH_USER
 ADD (CHANGE_PASSWD  NUMBER(1));
